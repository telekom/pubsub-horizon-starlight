<!--
Copyright 2024 Deutsche Telekom IT GmbH

SPDX-License-Identifier: Apache-2.0
-->

# Environment variables
Starlight is configured using environment variables. The following are supported environment variables:


| Name                                   | Default                                                                                                      | Description                                                                                                                                                                                   |
|----------------------------------------|--------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| LOG_LEVEL                              | INFO                                                                                                         |                                                                                                                                                                                               |
| JAEGER_COLLECTOR_URL                   | ***REMOVED***                                                                   |                                                                                                                                                                                               |
| ZIPKIN_SAMPLER_PROBABILITY             | 1.0                                                                                                          |                                                                                                                                                                                               |
| STARLIGHT_INFORMER_NAMESPACE           | playground                                                                                                   | The Kubernetes namespace from which the EventSubscription CRD is being polled                                                                                                                 |
| STARLIGHT_FEATURE_PUBLISHER_CHECK      | true                                                                                                         | Enable ownership verification for published events                                                                                                                                            |
| STARLIGHT_FEATURE_SCHEMA_VALIDATION    | true                                                                                                         | Enable schema validation for published events                                                                                                                                                 |
| STARLIGHT_HEADER_PROPAGATION_BLACKLIST | x-spacegate-token,authorization,content-length,host,accept.*,x-forwarded.*,cookie                            | A list of headers that will not be forwarded in the published event                                                                                                                           |
| STARLIGHT_ISSUER_URL                   | http://localhost:8080/auth/realms/default                                                                    | The issuer(s) that are trusted by Starlight                                                                                                                                                   |
| STARLIGHT_DEFAULT_ENVIRONMENT          | integration                                                                                                  | The default environment that is used for multi-tenancy                                                                                                                                        |
| STARLIGHT_PUBLISHING_TOPIC             | published                                                                                                    | The Kafka topic where events will be published                                                                                                                                                |
| STARLIGHT_PUBLISHING_TIMEOUT_MS        | 5000                                                                                                         | The timeout used when publishing events to Kafka                                                                                                                                              |
| ENIAPI_BASEURL                         | localhost:8080                                                                                               | Base URL of the ENI-API (used for polling event schemas)                                                                                                                                      |
| ENIAPI_REFRESHINTERVAL                 | 30000                                                                                                        | How often new schemas will be polled from the ENI-API                                                                                                                                         |
| IRIS_ISSUER_URL                        | https://iris-controlplane-integration.test.dhei.telekom.de/auth/realms/default/protocol/openid-connect/token | The issuer that is used to retrieve a token when calling ENI-API                                                                                                                              |
| CLIENT_ID                              | foo                                                                                                          | Client ID that is used to retrieve a token when calling ENI-API                                                                                                                               |
| CLIENT_SECRET                          | bar                                                                                                          | Client secret that is used to retrieve a token when calling ENI-API                                                                                                                           |
| VICTORIALOG_ENABLED                    | false                                                                                                        |                                                                                                                                                                                               |
| VICTORIALOG_COLLECTOR_URL              | http://localhost:8428                                                                                        |                                                                                                                                                                                               |
| VICTORIALOG_CLIENT_ID                  | starlight                                                                                                    |                                                                                                                                                                                               |
| VICTORIALOG_BATCH_SIZE                 | 128                                                                                                          |                                                                                                                                                                                               |
| VICTORIALOG_OBSERVATION_FLUSH_INTERVAL | 30000                                                                                                        |                                                                                                                                                                                               |
| VICTORIALOG_COUNT_EVENTS_INTERVAL      | 1000                                                                                                         |                                                                                                                                                                                               |
| VICTORIALOG_SAMPLING_RATE              | 1.0                                                                                                          |                                                                                                                                                                                               |
| STARLIGHT_KAFKA_BROKERS                | kafka:9092                                                                                                   | The Kafka broker that is used for publishing events                                                                                                                                           |
| STARLIGHT_KAFKA_TRANSACTION_PREFIX     | starlight                                                                                                    | The transaction-prefix that is used for publishing events                                                                                                                                     |
| STARLIGHT_KAFKA_GROUP_ID               | starlight                                                                                                    | The Kafka consumer group that is used for publishing events                                                                                                                                   |
| STARLIGHT_KAFKA_LINGER_MS              | 5                                                                                                            | How long the Kafka waits for other records before transmissing the batch ([Reference](https://docs.confluent.io/platform/current/installation/configuration/producer-configs.html#linger-ms)) |
| STARLIGHT_KAFKA_ACKS                   | 1                                                                                                            | How often the events needs to be acknowledge by Kafka                                                                                                                                         |
| STARLIGHT_KAFKA_COMPRESSION_ENABLED    | false                                                                                                        | If events send to Kafka should be compressed                                                                                                                                                  |
| STARLIGHT_KAFKA_COMPRESSION_TYPE       | none                                                                                                         | The compression type used to compress events                                                                                                                                                  |
